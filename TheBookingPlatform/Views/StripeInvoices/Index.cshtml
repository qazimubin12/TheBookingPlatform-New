@model TheBookingPlatform.ViewModels.StripeInvoicesListingViewModel
@{
    ViewBag.Title = "Index";
}

<div class="container-fluid my-3 py-3">
    <div class="row">
        <div class="col-lg-8">
            <div class="row">
                <div class="col-xl-12 col-md-12 mb-xl-0 mb-4">
                    <div class="card bg-transparent shadow-xl">
                        <div class="overflow-hidden position-relative border-radius-xl">
                            <img src="~/Content/MainTemplate2/assets/img/illustrations/pattern-tree.svg" class="position-absolute opacity-2 start-0 top-0 w-100 z-index-1 h-100" alt="pattern-tree">
                            <span class="mask bg-gradient-dark opacity-10"></span>
                            <div class="card-body position-relative z-index-1 p-3">
                                <h5 class="text-white mt-4 mb-5 pb-2">Active Package: <br /> @Model.Payments.LastOrDefault().Package.Name</h5>
                                <div class="d-flex">
                                    <div class="d-flex" style="gap:10px;">
                                        <div class="me-4">
                                            <p class="text-white text-sm opacity-8 mb-0">Company Owner</p>
                                            <h6 class="text-white mb-0">@Model.LoggedInUser.Name</h6>
                                        </div>
                                        <div>
                                            <p class="text-white text-sm opacity-8 mb-0">Company</p>
                                            <h6 class="text-white mb-0">@Model.Company.Business</h6>
                                        </div>
                                        <div>
                                            <p class="text-white text-sm opacity-8 mb-0">Billing Email</p>
                                            <h6 class="text-white mb-0">@Model.Company.BillingEmail</h6>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>

        </div>
        <div class="col-lg-4">
            <div class="row">
                <div class="col-lg-12">
                    <div class="card h-100">
                        <div class="card-header pb-0 p-3">
                            <div class="row">
                                <div class="col-6 d-flex align-items-center">
                                    <h6 class="mb-0">Invoices</h6>
                                </div>
                                
                            </div>
                        </div>
                        <div class="card-body p-3 pb-0">
                            <ul class="list-group">
                                @foreach (var item in Model.Payments)
                                {
                                    <li class="list-group-item border-0 d-flex justify-content-between ps-0 mb-2 border-radius-lg">
                                        <div class="d-flex flex-column">
                                            <h6 class="mb-1 text-dark font-weight-bold text-sm">@item.Payment.LastPaidDate.ToString("MMMM, dd, yyyy")</h6>
                                            <span class="text-xs"># INV-@item.Package.ID-@item.Payment.ID</span>
                                        </div>
                                        <div class="d-flex align-items-center text-sm">
                                            @item.Payment.Total @Model.Company.Currency
                                            <button class="btn btn-link text-dark text-sm mb-0 px-0 ms-4"><i class="material-icons text-lg position-relative me-1">picture_as_pdf</i></button>
                                        </div>
                                    </li>
                                }

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@*<div class="row">
        <div class="card">
            <div class="card-body">
                <h2 class="card-title">
                    Payments
                </h2>
                <div class="table-responsive">
                    <table class="table text-center">
                        <thead>
                            <tr>
                                <th>
                                    Package
                                </th>
                                <th>
                                    Amount
                                </th>
                                <th>
                                    Last Paid Date
                                </th>
                                <th>User</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.Payments)
                            {
                                <tr>
                                    <td>@item.Package.Name</td>
                                    <td>@item.Payment.Total @Model.Company.Currency</td>
                                    <td>@item.Payment.LastPaidDate.ToString("yyyy-MM-dd")</td>
                                    <td>@item.User.Name</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>*@

